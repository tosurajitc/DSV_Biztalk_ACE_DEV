<?xml version="1.0" encoding="UTF-8"?>
<ecore:EPackage xmi:version="2.0" 
    xmlns:xmi="http://www.omg.org/XMI" 
    xmlns:ComIbmCompute.msgnode="ComIbmCompute.msgnode"
    xmlns:ComIbmFileInput.msgnode="ComIbmFileInput.msgnode"
    xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" 
    xmlns:eflow="http://www.ibm.com/wbi/2005/eflow" 
    xmlns:utility="http://www.ibm.com/wbi/2005/eflow_utility" 
    nsURI="{FLOW_NAME}.msgflow"
    nsPrefix="{FLOW_NAME}">

  <eClassifiers xmi:type="eflow:FCMComposite" name="FCMComposite_1" nodeLayoutStyle="RECTANGLE">
    <eSuperTypes href="http://www.ibm.com/wbi/2005/eflow#//FCMBlock"/>
    
    <!-- FILE INPUT PROPERTIES -->
    <eStructuralFeatures xmi:type="ecore:EAttribute" xmi:id="Property.FILE_INPUT_DIRECTORY" name="FILE_INPUT_DIRECTORY" defaultValueLiteral="/var/mqsi/input">
      <eType xmi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eStructuralFeatures>
    
    <eStructuralFeatures xmi:type="ecore:EAttribute" xmi:id="Property.FILE_INPUT_PATTERN" name="FILE_INPUT_PATTERN" defaultValueLiteral="*.xml">
      <eType xmi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eStructuralFeatures>
    
    <composition>
      <!-- File Input Node -->
      <nodes xmi:type="ComIbmFileInput.msgnode:FCMComposite_1" 
            xmi:id="FCMComposite_1_FileInput" 
            location="50,100"
            inputDirectory="/var/mqsi/input"
            filenamePattern="*.xml"
            messageDomainProperty="XMLNSC">
        <translation xmi:type="utility:ConstantString" string="FileInput Node"/>
      </nodes>
      
      <!-- RECSATInput Subflow -->
      <nodes xmi:type="eflow:FCMSource" xmi:id="FCMComposite_1_RECSATInput" 
            location="200,100" 
            componentName="RECSATInput">
        <translation xmi:type="utility:ConstantString" string="RECSATInput Subflow"/>
      </nodes>
      
      <!-- Compute Node -->
      <nodes xmi:type="ComIbmCompute.msgnode:FCMComposite_1" 
            xmi:id="FCMComposite_1_Compute" 
            location="350,100"
            computeExpression="esql://routine/{FLOW_NAME}#{FLOW_NAME}_Compute.Main">
        <translation xmi:type="utility:ConstantString" string="Compute"/>
      </nodes>
      
      <!-- StartEventMessage Node -->
      <nodes xmi:type="ComIbmCompute.msgnode:FCMComposite_1" 
            xmi:id="FCMComposite_1_StartEvent" 
            location="200,220"
            computeExpression="esql://routine/{FLOW_NAME}#{FLOW_NAME}_StartEventMessage.Main">
        <translation xmi:type="utility:ConstantString" string="StartEventMessage"/>
      </nodes>
      
      <!-- RECSATOutput Subflow -->
      <nodes xmi:type="eflow:FCMSink" xmi:id="FCMComposite_1_RECSATOutput" 
            location="500,100" 
            componentName="RECSATOutput">
        <translation xmi:type="utility:ConstantString" string="RECSATOutput Subflow"/>
      </nodes>
      
      <!-- Connections -->
      <connections xmi:type="eflow:FCMConnection" xmi:id="FCMConnection_1" 
                  targetNode="FCMComposite_1_RECSATInput" sourceNode="FCMComposite_1_FileInput" 
                  sourceTerminalName="OutTerminal.out" targetTerminalName="InTerminal.in"/>
                  
      <connections xmi:type="eflow:FCMConnection" xmi:id="FCMConnection_2" 
                  targetNode="FCMComposite_1_Compute" sourceNode="FCMComposite_1_RECSATInput" 
                  sourceTerminalName="OutTerminal.out" targetTerminalName="InTerminal.in"/>
                  
      <connections xmi:type="eflow:FCMConnection" xmi:id="FCMConnection_3" 
                  targetNode="FCMComposite_1_RECSATOutput" sourceNode="FCMComposite_1_Compute" 
                  sourceTerminalName="OutTerminal.out" targetTerminalName="InTerminal.in"/>
                  
      <connections xmi:type="eflow:FCMConnection" xmi:id="FCMConnection_4" 
                  targetNode="FCMComposite_1_StartEvent" sourceNode="FCMComposite_1_RECSATInput" 
                  sourceTerminalName="OutTerminal.out" targetTerminalName="InTerminal.in"/>
    </composition>
    
    <propertyOrganizer>
      <propertyDescriptor groupName="Group.Basic" configurable="true" describedAttribute="Property.FILE_INPUT_DIRECTORY">
        <propertyName xmi:type="utility:TranslatableString" key="Property.FILE_INPUT_DIRECTORY" bundleName="ComIbmFileInput" pluginId="com.ibm.etools.mft.ibmnodes.definitions"/>
      </propertyDescriptor>
      <propertyDescriptor groupName="Group.Basic" propertyEditor="com.ibm.etools.mft.ibmnodes.editors.file.FileInputNodeFilePropertyEditor" configurable="true" describedAttribute="Property.FILE_INPUT_PATTERN">
        <propertyName xmi:type="utility:TranslatableString" key="Property.FILE_INPUT_PATTERN" bundleName="ComIbmFileInput" pluginId="com.ibm.etools.mft.ibmnodes.definitions"/>
      </propertyDescriptor>
    </propertyOrganizer>

    <attributeLinks promotedAttribute="Property.FILE_INPUT_DIRECTORY" overriddenNodes="FCMComposite_1_FileInput">
      <overriddenAttribute href="ComIbmFileInput.msgnode#Property.inputDirectory"/>
    </attributeLinks>
    <attributeLinks promotedAttribute="Property.FILE_INPUT_PATTERN" overriddenNodes="FCMComposite_1_FileInput">
      <overriddenAttribute href="ComIbmFileInput.msgnode#Property.filenamePattern"/>
    </attributeLinks>

    <stickyBoard/>
  </eClassifiers>
</ecore:EPackage>